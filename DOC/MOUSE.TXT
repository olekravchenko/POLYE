                   Описание "Мышиного ввода"                  

     Программа  предназначена  для  автоматического  ввода   и 
построения  функций  w(x,y),  ░ (x,y)  и  их  использования  в 
                               i
системе Поле при решении краевых задач. Для работы программы в 
системе Поле необходимо: 
     1. Процессор 386 и выше;
     2. Дисплей VGA  и выше;
     3. Манипулятор типа "мышь";
     Программа написана на Фортране для  рабочих  станций  (32 
разряда)  и  использует   объектный   модуль   mouse.obj   для 
управления мышью. Вся программа  состоит  из  23  подпрограмм, 
которые записаны в библиотеку polygon.lib.

     1. Вызов в системе Поле
     В системе Поле необходимо выполнить оператор  Pr2;  затем 
можно использовать в Program произвольные операторы  языка  RL 
(например, Gauss, Inspli, Sis, Result и  др.).  Кроме  того  в 
разделе Declare  необходимо  описать  какой-нибудь  массив  из 
четырех элементов, а в разделе Value  присвоить  значения  для 
описания левой-нижней и правой-верхней вершин  прямоугольника, 
в который будет заключена вводимая область. Отметим, что такое 
описание (например, Array pr;) должно быть первым в программе. 
Если  предполагается  получать  в   программе   информацию   о 
подобластях (функциях ░ (x,y)), то сразу же необходимо описать 
                       i
столько кортежей, сколько их будет вводится и использоваться в 
программе (не меньше). Для вычисдения функций ░(x,y),  ░ (x,y) 
                                                        i
необходимо описать  соответствующий  модуль  (например,  Modul 
Poly;):
     1. Poly - самый простой модуль;
     2. Poly1 - В этом модуле для всех входящих углов, меньших 
45  градусов,  добавляется  по   R-дизъюнкции   дополнительная 
опорная функция,  приблизительно  перпендикулярная  бисектрисе 
угла;
     3. Poly2 - В этом модуле происходит запись  кортежей  для 
функций ░ (x,y) в соответствующую память и обеспечение доступа 
         i
к ним из RL программ.
     Предполагается увеличение числа таких модулей.
     Для вывода  результатов  можно  использовать  графический 
интегратор Result, а  можно и  оператор  Iso   с   такими   же 
параметрами (например, Iso(r1,fu);).

     2. Вод информации
     Поле экрана дисплея разбивается на две части:
     1. Поле ввода  -  светлый  прямоугольник  (большая  часть 
экрана  в правом нижнем углу).
     2. Поля управления - кнопки с надписями.
Перемещение курсора на  поле  ввода  обеспечивается  движением 
мыши.  При  этом  на  сером   табло   высвечиваются   реальные 
координаты x и y (диапазон изменения задается в RL программе). 
Выбор точки  (вершины  многоугольника)  производится  нажатием 
левой кнопки мыши. Обход прямоугольника осуществляется  против 
часовой стрелки. 
     При построении чертежа можно использовать различный  цвет 
для рисования  линий.  Для  этого  достаточно  щелкнуть  левой 
кнопкой мыши на цветовой палитре.
     При подводе мыши  к  какой-либо  кнопке  на  сером  табло 
высвечивается   краткая   информация   о   ее   функциональном 
назначении. При нажатии кнопки (щелканье левой клавишей мыши в 
соответствующем поле) происходит выполнение следующих команд: 
     Clear - стирание поля ввода. Действие  кнопки  аналогично 
первоначальному запуску программы.
     Stop   -    конец    ввода    фрагмента    многоугольника 
(подобласти).  Такая   подобласть   будет   использована   при 
построения общей функции ░(x,y), а также в RL программе  (если 
используется модуль Poly2 для построения функции ░(x,y)).  При 
нажатии этой кнопки  формируется  замкнутая  подобласть,  если 
последняя  точка  совпадает  с  первой  (но   могут   быть   и 
разомкнутые   подобласти).   Иногда   целесообразно   рисовать 
подобласти различным цветом. В конечном итоге  все  подобласти 
ориентируются так,  чтобы  быть  положительными  в  точке  для 
заливки области, а затем объединяются по R-конъюнкции.
     Change - начало изменений в чертеже. После  нажатия  этой 
кнопки можно редактировать полученный рисунок:
     1. Если подвести курсор  мыши  к  вершине,  нажать  левую 
кнопку и "потянуть", то вершина будет перемещаться за курсором 
до тех пор, пока левая кнопка не будет отпущена.
     2. Если подвести курсор мыши к стороне  многоугольника  и 
произвести аналогичные действия, то эта сторона  разделится  в 
заданном соотношении  и  на  чертеже  добавится  новая  точка, 
положение которой зафиксируется после того, как будет отпущена 
левая кнопка мыши.
     Undo - возврат программы на одиг шаг назад. Если рисуются 
прямые  линии  или  окружности,  то  исчезает  соответствующий 
объект (точка, прямая, окружность). Эта кнопка работает только 
до нажатия кнопки Stop (после нажатия возможно  редактирование 
с использованием кнопки Change). 
     Fill  -   заполнение   области.   Определяет   ориентацию 
подобластей при формировании общей области. После нажатия этой 
клавиши необходимо поставить точку в области  (щелкнуть  левой 
кнопкой мыши). Производится  закраска  области.  По  умолчанию 
в   качестве   координаты   этой   точки   выбирается    центр 
прямоугольника (значит, можно и не  пользоваться).  С  помощью 
этой кнопки можно определять и внешность области.
     Circle - подключение оружностей к чертежу. После  нажатия 
этой кнопки можно добавлять окружности. Для  этого  необходимо 
щелкнуть левой кнопкой в центре окружности, затем "потянуть" - 
на  табло  будет  значение  радиуса.   Построение   окружности 
завершается после того, как кнопка будет отпущена. Окружностей 
может быть много  -  они  объединяются  по  R-дизъюнкции.  Для 
завершения необходимо нажать кнопку Stop.  R-дизъюнкция  таких 
окружностей оформляется, как отдельная подобласть.
     Write -  запись рисунка в файл с именем <name>.in.
     Read -  чтение рисунка из файла.
     Exit - Окончание построения рисунка  и  выход  в  систему 
Поле для решения задачи.
     3. Вывод информации
     Для  вывода  информации  можно  использовать  графический 
интегратор Result. Однако иногда целесообразно воспользоваться 
оператором Iso для построения линий уровня в том же  масштабе, 
что  и  при  вводе.  Практически  линии  уровня  строятся, как 
дополнение построенного рисунка. При этом внешний вид  панелей 
на  экране  дисплея  остается  таким  же  -  изменяется   лишь 
функциональное назначение кнопок:
     1. Density - построение картины линий уровня.
     2. Surface - аксонометрические построения.
     3. Contour - контуры линий уровня.
     4. Zoom - просмотр в большем масштабе.  Для  этого  после 
нажатия кнопки необходимо на поле вывода нажать  левую  кнопку 
мыши и потащить ее. После того,  как  кнопка  будет  отпущена, 
образуется новый прямоугольник для выода.
     5. Undo - возврат на один шаг назад после Zoom.  Возможно 
многократное использовани Zoom и Undo.
     6. Clear - стирание поля для вывода.
     7. Write - запись  информации  для  построения  картин  в 
формате программы Demo. Записываются значения функций ░(x,y) и 
f(x,y) (функции -результата).  Возможно  многократное  нажатие 
этой кнопки. При этом записываются файлы с именами <i>.3d, где 
i- номер нажатия кнопки в этой задаче.
     8. Read - чтение информации и построение рисунка (как это 
делается на  первом  шаге  при  его  построении).  Равносильно 
первоначальному запуску программы.
     9. Exit - окончание вывода и выход в систему Поле.


